<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>POLS 503: Advanced Quantitative Political Methodology: The Notes</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="<p>These are notes associated with the course, POLS/CS&amp;SS 503: Advanced Quantitative Political Methodology at the University of Washington.</p>">
  <meta name="generator" content="bookdown 0.0.73 and GitBook 2.6.7">

  <meta property="og:title" content="POLS 503: Advanced Quantitative Political Methodology: The Notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>These are notes associated with the course, POLS/CS&amp;SS 503: Advanced Quantitative Political Methodology at the University of Washington.</p>" />
  <meta name="github-repo" content="UW-POLS503/pols503-notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="POLS 503: Advanced Quantitative Political Methodology: The Notes" />
  
  <meta name="twitter:description" content="<p>These are notes associated with the course, POLS/CS&amp;SS 503: Advanced Quantitative Political Methodology at the University of Washington.</p>" />
  

<meta name="author" content="Jeffrey B. Arnold">

<meta name="date" content="2016-06-19">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="collinearity-and-multicollinearity.html">
<link rel="next" href="functional-form-and-non-linearity.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

$$
\DeclareMathOperator{\E}{E}
\DeclareMathOperator{\mean}{mean}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\Cor}{Cor}
\DeclareMathOperator{\Bias}{Bias}
\DeclareMathOperator{\MSE}{MSE}
\DeclareMathOperator{\sd}{sd}
\DeclareMathOperator{\se}{se}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\newcommand{\mat}[1]{\boldsymbol{#1}}
\newcommand{\vec}[1]{\boldsymbol{#1}}
\newcommand{\T}{'}

\newcommand{\distr}[1]{\mathcal{#1}}
\newcommand{\dnorm}{\distr{N}}
\newcommand{\dmvnorm}[1]{\distr{N}_{#1}}
\newcommand{\dt}[1]{\distr{T}_{#1}}

\newcommand{\cia}{\perp\!\!\!\perp}
\DeclareMathOperator*{\plim}{plim}
$$

  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="linear-regression-and-the-ordinary-least-squares-ols-estimator.html"><a href="linear-regression-and-the-ordinary-least-squares-ols-estimator.html"><i class="fa fa-check"></i><b>2</b> Linear Regression and the Ordinary Least Squares (OLS) Estimator</a></li>
<li class="chapter" data-level="3" data-path="ols-inference.html"><a href="ols-inference.html"><i class="fa fa-check"></i><b>3</b> OLS Inference</a></li>
<li class="chapter" data-level="4" data-path="omitted-variable-bias-and-measurement-error.html"><a href="omitted-variable-bias-and-measurement-error.html"><i class="fa fa-check"></i><b>4</b> Omitted Variable Bias and Measurement Error</a></li>
<li class="chapter" data-level="5" data-path="collinearity-and-multicollinearity.html"><a href="collinearity-and-multicollinearity.html"><i class="fa fa-check"></i><b>5</b> Collinearity and Multicollinearity</a></li>
<li class="chapter" data-level="6" data-path="rs-formula-syntax.html"><a href="rs-formula-syntax.html"><i class="fa fa-check"></i><b>6</b> R’s Formula Syntax</a></li>
<li class="chapter" data-level="7" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html"><i class="fa fa-check"></i><b>7</b> Functional Form and Non-linearity</a><ul>
<li class="chapter" data-level="7.1" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#non-linearity"><i class="fa fa-check"></i><b>7.1</b> Non-linearity</a><ul>
<li class="chapter" data-level="7.1.1" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#whats-the-problem"><i class="fa fa-check"></i><b>7.1.1</b> What’s the problem?</a></li>
<li class="chapter" data-level="7.1.2" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#what-to-do-about-it-and-how-to-solve-it"><i class="fa fa-check"></i><b>7.1.2</b> What to do about it? And How to Solve it?</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#logarithm"><i class="fa fa-check"></i><b>7.2</b> Logarithm</a><ul>
<li class="chapter" data-level="7.2.1" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#examples-of-relevant-theories"><i class="fa fa-check"></i><b>7.2.1</b> Examples of Relevant Theories</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#miscellaneous"><i class="fa fa-check"></i><b>7.3</b> Miscellaneous</a><ul>
<li class="chapter" data-level="7.3.1" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#square-root-and-variance-stabalizing-transformations"><i class="fa fa-check"></i><b>7.3.1</b> Square Root and Variance Stabalizing Transformations</a></li>
<li class="chapter" data-level="7.3.2" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#power-transformation"><i class="fa fa-check"></i><b>7.3.2</b> Power-Transformation</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#polynomials"><i class="fa fa-check"></i><b>7.4</b> Polynomials</a><ul>
<li class="chapter" data-level="7.4.1" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#squared"><i class="fa fa-check"></i><b>7.4.1</b> Squared</a></li>
<li class="chapter" data-level="7.4.2" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#higher-order-polynomials"><i class="fa fa-check"></i><b>7.4.2</b> Higher-Order Polynomials</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#interactions"><i class="fa fa-check"></i><b>7.5</b> Interactions</a><ul>
<li class="chapter" data-level="7.5.1" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#theories"><i class="fa fa-check"></i><b>7.5.1</b> Theories</a></li>
<li class="chapter" data-level="7.5.2" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#recommendations"><i class="fa fa-check"></i><b>7.5.2</b> Recommendations</a></li>
<li class="chapter" data-level="7.5.3" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#plots"><i class="fa fa-check"></i><b>7.5.3</b> Plots</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#flexible-functional-forms"><i class="fa fa-check"></i><b>7.6</b> Flexible Functional Forms</a></li>
<li class="chapter" data-level="7.7" data-path="functional-form-and-non-linearity.html"><a href="functional-form-and-non-linearity.html#references"><i class="fa fa-check"></i><b>7.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="non-constant-variances-and-correlated-errors.html"><a href="non-constant-variances-and-correlated-errors.html"><i class="fa fa-check"></i><b>8</b> Non-constant Variances and Correlated Errors</a></li>
<li class="chapter" data-level="9" data-path="weighting-in-regression.html"><a href="weighting-in-regression.html"><i class="fa fa-check"></i><b>9</b> Weighting in Regression</a></li>
<li class="chapter" data-level="10" data-path="interpreting-regression-coefficients.html"><a href="interpreting-regression-coefficients.html"><i class="fa fa-check"></i><b>10</b> Interpreting Regression Coefficients</a></li>
<li class="chapter" data-level="11" data-path="regression-diagnostics.html"><a href="regression-diagnostics.html"><i class="fa fa-check"></i><b>11</b> Regression Diagnostics</a></li>
<li class="chapter" data-level="12" data-path="resampling-methods.html"><a href="resampling-methods.html"><i class="fa fa-check"></i><b>12</b> Resampling Methods</a></li>
<li class="chapter" data-level="13" data-path="panel-longitudinal-data.html"><a href="panel-longitudinal-data.html"><i class="fa fa-check"></i><b>13</b> Panel (Longitudinal) Data</a></li>
<li class="chapter" data-level="14" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>14</b> Appendix</a></li>
<li class="chapter" data-level="15" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i><b>15</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">POLS 503: Advanced Quantitative Political Methodology: The Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rs-formula-syntax" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> R’s Formula Syntax</h1>
<p>Many R functions, especially those for statistical models such as <code>lm()</code>, use a convenient syntax to compactly specify the outcome and predictor variables. This format is described in more detail in the <a href="http://www.rdocumentation.org/packages/stats/functions/formula">formula</a> help page. Formulae in R are denoted with a tilde (<code>~</code>), with the interpretation</p>
<pre><code>outcome ~ predictors </code></pre>
<p>For example, this</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span>(<span class="dt">formula =</span> prestige ~<span class="st"> </span>type +<span class="st"> </span>income *<span class="st"> </span>education, <span class="dt">data =</span> Duncan)</code></pre></div>
<p>estimates this, <span class="math display">\[
\mathtt{prestige} = \beta_0 + \beta_1 \mathtt{income} + \beta_2 \mathtt{education} + \beta_3 \mathtt{income} \times \mathtt{education} .
\]</span> Note that <code>+</code> and <code>*</code> are not directly interpreted as addition and multiplication, instead adding terms to the regression and interactions, respectively. In a formula, there is a special syntax in which some common operators have different meanings than in R.</p>
<table>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Example</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>+</code></td>
<td align="left"><code>+x</code></td>
<td align="left">Include <span class="math inline">\(x\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>-</code></td>
<td align="left"><code>-x</code></td>
<td align="left">Exclude <span class="math inline">\(x\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>:</code></td>
<td align="left"><code>x : z</code></td>
<td align="left">Include <span class="math inline">\(x z\)</span> as a predictor</td>
</tr>
<tr class="even">
<td align="left"><code>*</code></td>
<td align="left"><code>x * z</code></td>
<td align="left">Include <span class="math inline">\(x\)</span>, <span class="math inline">\(z\)</span>, and their interaction <span class="math inline">\(x z\)</span> as predictors</td>
</tr>
<tr class="odd">
<td align="left"><code>^</code></td>
<td align="left"><code>(x + w + z) ^ 3</code></td>
<td align="left">Include variables and interactions up to three way: <span class="math inline">\(x\)</span>, <span class="math inline">\(z\)</span>, <span class="math inline">\(w\)</span>, <span class="math inline">\(xz\)</span>, <span class="math inline">\(xw\)</span>, <span class="math inline">\(zw\)</span>, <span class="math inline">\(xzw\)</span>.</td>
</tr>
<tr class="even">
<td align="left"><code>I</code></td>
<td align="left"><code>I(x ^ 2)</code></td>
<td align="left">as is: include a new variable with <span class="math inline">\(x ^ 2\)</span>.</td>
</tr>
<tr class="odd">
<td align="left"><code>1</code></td>
<td align="left"><code>-1</code></td>
<td align="left">Intercept; Use <code>-1</code> to delete, and <code>+1</code> to include</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">Formula</th>
<th align="left">Equation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>y ~ x + y + z</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + beta_1 x + beta_2 y + beta_3 z\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ x + y - 1</code></td>
<td align="left"><span class="math inline">\(y = \beta_1 x + \beta_2 y\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ 1</code></td>
<td align="left"><span class="math inline">\(y = \beta_0\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ x:z</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 xz\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ x*z</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 z + \beta_3 xz\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ x*z - x</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 z + \beta_2 xz\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ (x + z)^2</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 z + \beta_3\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ (x + z + w)^2</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 z + \beta_3 w + \beta_4 w + \beta_5 xz + \beta_6 xw + \beta_7 zw\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ (x + z + w)^2</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 z + \beta_3 w + \beta_4 w + \beta_5 xz + \beta_6 xw + \beta_7 zw + \beta_8 xzw\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ x + I(x ^ 2)</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 x^2\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ poly(x, 2)</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 x^2\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ I(x * z)</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 xz\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ I(x + z) + I(x - z)</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 (x + z) + \beta_2 (x - z)\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ log(x)</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 \log(x)\)</span></td>
</tr>
<tr class="odd">
<td align="left"><code>y ~ x / z</code></td>
<td align="left"><span class="math inline">\(y = \beta_0 + \beta_1 (x / z)\)</span></td>
</tr>
<tr class="even">
<td align="left"><code>y ~ x + 0</code></td>
<td align="left"><span class="math inline">\(y = \beta_1 x\)</span></td>
</tr>
</tbody>
</table>
<p>Formulae provide a convenient means of specifying the statistical model and also generating temporary variables that we only need for the model. For example, if we want to include <span class="math inline">\(\log(x)\)</span>, <span class="math inline">\(z\)</span>, their interaction <span class="math inline">\(\log(x)\)</span>, and the square of <span class="math inline">\(z\)</span>, we could write <code>y ~ log(x) * y + I(y ^ 2)</code> instaed of of having to create the log, square, and interaction variables before running the regression. This becomes especially useful if you need to include large polynomials, splines, interaction, or similarly complicated functional forms.</p>
<p><strong>Warning:</strong> Often you will want to include polynomials in a regression. However, <code>^</code> already has a special meaning in R’s syntax, so you cannot use <code>x ^ 2</code>. There are two ways to specify polynomials. - Use the as is operator, <code>I()</code>. For example, <code>I(x ^ 2)</code> includes <span class="math inline">\(x^2\)</span> in the regression. - Use the <code>poly</code> function to generate polynomials. For example, <code>I(x ^ 2)</code> will include <span class="math inline">\(x\)</span> and <span class="math inline">\(x^2\)</span> in the regerssion. This can be more convenient and clear than writing <code>x + I(x ^ 2)</code>$.</p>
<p><strong>Warning:</strong> R’s <code>formula</code> syntax is flexible and includes more features than what ws covered in this section. What was described in this section were features that <code>lm()</code> uses. Other functions may have more features or the parts will have different meanings. However, they will be mostly be similar to what was described here. An example of a function that has slightly different syntax for its formula is <a href="http://www.rdocumentation.org/packages/lme4/functions/lmer">lmer</a> which adds notation for random and fixed effects. Some functions like <a href="http://www.rdocumentation.org/packages/stats/functions/xtabs">xtabs</a> use a formula syntax even though they aren’t statistical modeling functions. The package <a href="http://www.rdocumentation.org/packages/Formula">Formula</a> provides an even more powerful Formula syntax than that included with base R. If you have to write a function or package that uses a formula, use that package.</p>
<p>Inspired by this <a href="http://faculty.chicagobooth.edu/richard.hahn/teaching/formulanotation.pdf">handout</a> from Richard Hahn and the <a href="http://science.nature.nps.gov/im/datamgmt/statistics/r/formulas/">handout</a> form the NPS.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="collinearity-and-multicollinearity.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functional-form-and-non-linearity.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/UW-POLS503/pols503-notes/edit/gh-pages/functional-form.Rmd",
"text": "Edit"
},
"download": ["pols503-notes.pdf", "pols503-notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
